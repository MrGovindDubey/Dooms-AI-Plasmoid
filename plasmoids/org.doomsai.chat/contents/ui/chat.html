<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dooms AI Chat</title>
    <link rel="stylesheet" href="assets/chat.css?v=7">
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <div class="header">
            <div class="title">‚ö° DOOMS AI ‚Äî CHAT</div>
            <div class="header-right">
                <div class="status">
                    <div class="status-dot" id="statusDot"></div>
                    <div class="status-text" id="statusText">Initializing</div>
                </div>
                <button id="historyButton" class="history-button" title="Chat Archive" aria-label="Archive">
                    <svg class="history-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false" aria-hidden="true">
                        <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        <path d="M8 5a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3.5A.5.5 0 0 1 7 9V5.5A.5.5 0 0 1 8 5z"/>
                    </svg>
                </button>
                <a id="githubLink" class="github-link" href="https://github.com/MrGovindDubey/Dooms-AI-Plasmoid" title="Open GitHub" aria-label="GitHub">
                    <svg class="github-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38
                        0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01
                        1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95
                        0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2
                        .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95
                        .29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                </a>
            </div>
        </div>

        <!-- Setup Progress -->
        <div class="setup-progress" id="setupProgress">
            <div class="progress-header">
                <div class="progress-title">üöÄ INITIALIZING AI SYSTEM</div>
                <div class="progress-subtitle">Please wait while we prepare your AI assistant...</div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">Starting initialization...</div>
            <div class="progress-steps">
                <div class="progress-step" id="step-init"><div class="step-icon">1</div><div class="step-label">Initialize</div></div>
                <div class="progress-step" id="step-engine"><div class="step-icon">2</div><div class="step-label">Engine</div></div>
                <div class="progress-step" id="step-service"><div class="step-icon">3</div><div class="step-label">Service</div></div>
                <div class="progress-step" id="step-model"><div class="step-icon">4</div><div class="step-label">Intelligence</div></div>
                <div class="progress-step" id="step-complete"><div class="step-icon">‚úì</div><div class="step-label">Ready</div></div>
            </div>
            <div class="progress-instructions" id="progressInstructions" style="margin-top: 10px; font-size: 12px; line-height: 1.4; color: #666; background: rgba(0,0,0,0.03); border: 1px solid rgba(0,0,0,0.08); border-radius: 8px; padding: 10px 12px;">
                <ul style="margin: 0 0 6px 18px; padding: 0;">
                    <li>Doom AI runs locally on your system ‚Äî fully private and secure.</li>
                    <li>It‚Äôs fully uncensored, offline-capable, and free for you to explore without limits.</li>
                    <li>Optimized for local performance ‚Äî check specs on GitHub.</li>
                    <li>Future builds will unlock faster response and web access.</li>
                    <li>Your hardware defines speed ‚Äî stronger systems, smoother AI. (Futur build may use API)</li>
                    <li>Doom AI exists to give you true control of your AI.</li>
                    <li>Every <a href="https://github.com/MrGovindDubey/Dooms-AI-Plasmoid" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">‚≠ê</a> is a thank-you that powers the next release.</li>
                </ul>
                <div style="font-size: 11px; color: #888; text-align: right;">‚Äî Mr Govind</div>
            </div>
        </div>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chatMessages"></div>

        <!-- History Panel -->
        <div class="history-panel" id="historyPanel">
            <div class="history-header">
                <div class="history-title">üìö Chat Archive</div>
                <div class="history-actions">
                    <button class="history-action-btn" id="saveCurrentBtn" title="Save Current Chat">
                        <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 2a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 8.293V2.5A.5.5 0 0 1 8 2z"/>
                            <path d="M3 9.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                    </button>
                    <button class="history-action-btn" id="clearHistoryBtn" title="Clear All Archive">
                        <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                        </svg>
                    </button>
                    <button class="history-close-btn" id="historyCloseBtn" title="Close Archive">‚úï</button>
                </div>
            </div>
            <div class="history-search">
                <input type="text" class="history-search-input" id="historySearchInput" placeholder="Search conversations...">
            </div>
            <div class="history-list" id="historyList">
                <div class="history-empty">
                    <div class="history-empty-icon">üìù</div>
                    <div class="history-empty-text">No chat archive yet</div>
                    <div class="history-empty-subtitle">Start a conversation to save it here</div>
                </div>
            </div>
        </div>

        <!-- History Overlay -->
        <div class="history-overlay" id="historyOverlay"></div>

        <!-- Input Area -->
        <div class="input-container">
            <div class="input-wrapper">
                <textarea class="input-field" id="messageInput" placeholder="Type a message (Enter to send, Shift+Enter for newline)" rows="1"></textarea>
                <button class="send-button" id="sendButton">‚Æï SEND</button>
            </div>
        </div>
    </div>

    <script src="assets/chat.js?v=8"></script>
    <script>
      (function(){
        try{
          const params = new URLSearchParams(location.search);
          if (params.get('demo') === '1') {
            setTimeout(function(){
              if (window.addMessage) {
                window.addMessage('assistant', 'Here is the visible result. Click the arrow or the ‚Äúthinking...‚Äù hint to expand.', 'Okay, the user said "Hello". I should respond in a friendly and welcoming manner. Let me make sure to acknowledge their greeting and offer assistance. Maybe add an emoji to keep it approachable. Let me check if there\'s anything specific they might need help with. Keep it open-ended so they feel comfortable asking anything. Alright, that should work.');
              }
            }, 150);
          }
        }catch(e){}
      })();
    </script>
</body>
</html>
